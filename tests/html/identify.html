<html>
  <head> </head>
  <body>
    <h1>Page Loaded</h1>

    <script type="text/javascript">
      rudderanalytics = window.rudderanalytics = [];
      var methods = ["load", "page", "track", "identify", "trackEvent", "trackPage", "identifyUser", "reset"];
      for(var i=0;i<methods.length;i++){
        var method = methods[i];
        rudderanalytics[method] = function(methodName){
          return function(){
            rudderanalytics.push([methodName, ...arguments]);
          }
        }(method)
      }

      rudderanalytics.load("1S2kNlbkMrWLBO79H2eNuEST27I");
      rudderanalytics.reset();
    </script>
    <script src="browser.js"></script>
    <script type="text/javascript">
      rudderanalytics.identify("123456");
      rudderanalytics.track("test with identify");
      rudderanalytics.identify(
        {
          name: "Tintin",
          city: "Brussels",
          country: "Belgium",
          email: "tintin@herge.com"
        },
        {
          context: {
            ip: "0.0.0.0"
          },
          page: {
            path: "",
            referrer: "",
            search: "",
            title: "",
            url: ""
          },
          anonymousId: "00000000000000000000000000"
        },
        () => {
          console.log("in identify tintin html");
        }
      );
      rudderanalytics.track("test with traits");
      rudderanalytics.reset();
      rudderanalytics.track("test after reset", {}, {
          context: {
            ip: "0.0.0.0"
          },
          page: {
            path: "",
            referrer: "",
            search: "",
            title: "",
            url: ""
          },
          anonymousId: "00000000000000000000000000"
        });
      rudderanalytics.identify("1234567",
        {
          name: "Mickey",
          city: "Disneyland",
          country: "USA",
          email: "mickeymouse@disney.com"
        },
        {
          context: {
            ip: "0.0.0.0"
          },
          page: {
            path: "",
            referrer: "",
            search: "",
            title: "",
            url: ""
          },
          anonymousId: "00000000000000000000000000"
        },
        () => {
          console.log("in identify mickey html");
        }
      );
      rudderanalytics.track("test after reassignment");
    </script>
  </body>
</html>
