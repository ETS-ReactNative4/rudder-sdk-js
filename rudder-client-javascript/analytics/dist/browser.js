var analytics=function(e,t){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){return t&&""!==t?t:void 0}function l(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var s=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?s:3&s|8).toString(16)}))}var d={TRACK:"track",PAGE:"page",IDENTIFY:"identify"},y={PRODUCTS_SEARCHED:"Products Searched",PRODUCT_LIST_VIEWED:"Product List Viewed",PRODUCT_LIST_FILTERED:"Product List Filtered",PROMOTION_VIEWED:"Promotion Viewed",PROMOTION_CLICKED:"Promotion Clicked",PRODUCT_CLICKED:"Product Clicked",PRODUCT_VIEWED:"Product Viewed",PRODUCT_ADDED:"Product Added",PRODUCT_REMOVED:"Product Removed",CART_VIEWED:"Cart Viewed",CHECKOUT_STARTED:"Checkout Started",CHECKOUT_STEP_VIEWED:"Checkout Step Viewed",CHECKOUT_STEP_COMPLETED:"Checkout Step Completed",PAYMENT_INFO_ENTERED:"Payment Info Entered",ORDER_UPDATED:"Order Updated",ORDER_COMPLETED:"Order Completed",ORDER_REFUNDED:"Order Refunded",ORDER_CANCELLED:"Order Cancelled",COUPON_ENTERED:"Coupon Entered",COUPON_APPLIED:"Coupon Applied",COUPON_DENIED:"Coupon Denied",COUPON_REMOVED:"Coupon Removed",PRODUCT_ADDED_TO_WISHLIST:"Product Added to Wishlist",PRODUCT_REMOVED_FROM_WISHLIST:"Product Removed from Wishlist",WISH_LIST_PRODUCT_ADDED_TO_CART:"Wishlist Product Added to Cart",PRODUCT_SHARED:"Product Shared",CART_SHARED:"Cart Shared",PRODUCT_REVIEWED:"Product Reviewed"},f="http://18.222.145.124:5000/dump",p=5e3;var g={HS:function(){function e(t){i(this,e),this.hubId=t}return r(e,[{key:"init",value:function(){!function(e,t){var s=document.createElement("script");s.src=t,s.type="text/javascript",s.id=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(s,i)}("hubspot-integration","http://js.hs-scripts.com/"+this.hubId+".js")}},{key:"identify",value:function(e){var t=e.message.context.traits,i={};for(var n in t){if(Object.getOwnPropertyDescriptor(t,n)&&t[n])i[n.startsWith("")?n.substring(3,n.length):n]=t[n]}if(i.address){var r=i.address;for(var o in delete i.address,r)if(Object.getOwnPropertyDescriptor(r,o)&&r[o]){var a=o.startsWith("")?o.substring(3,o.length):o;i[a="street"==a?"address":a]=r[o]}}var u=e.message.context.user_properties;for(var c in u){if(Object.getOwnPropertyDescriptor(u,c)&&u[c])i[c.startsWith("")?c.substring(3,c.length):c]=u[c]}void 0!==("undefined"==typeof window?"undefined":s(window))&&(window._hsq=window._hsq||[]).push(["identify",i])}},{key:"track",value:function(e){var t=window._hsq=window._hsq||[],s={};s.id=e.message.event,e.message.properties&&e.message.properties.revenue&&(s.value=e.message.properties.revenue),t.push(["trackEvent",s])}},{key:"page",value:function(e){var t=window._hsq=window._hsq||[];e.message.properties&&e.message.properties.path&&t.push(["setPath",e.message.properties.path]),t.push(["trackPageView"])}},{key:"loaded",value:function(){return!(!window._hsq||window._hsq.push===Array.prototype.push)}}]),e}()},v=function e(){i(this,e),this.build="1.0.0",this.name="RudderLabs JavaScript SDK",this.namespace="com.rudderlabs.javascript",this.version="1.0.0"},m=function e(){i(this,e),this.name="RudderLabs JavaScript SDK",this.version="1.0.0"},I=function e(){i(this,e),this.name="",this.version=""},E=function e(){i(this,e),this.density=0,this.width=0,this.height=0},k=function e(){i(this,e),this.app=new v,this.traits=null,this.library=new m;var t=new I;t.version="";var s=new E;s.width=0,s.height=0,s.density=0,t.version="",t.name="",this.user_agent=null,this.locale=null,this.screen=s,this.device=null,this.network=null},P=function(){function e(){i(this,e),this.channel="web",this.context=new k,this.type=null,this.action=null,this.message_id=l().toString(),this.timestamp=(new Date).getTime(),this.anonymous_id=l().toString(),this.user_id=null,this.event=null,this.properties={},this.integrations={},this.integrations.All=!0}return r(e,[{key:"getProperty",value:function(e){return this.properties[e]}},{key:"addProperty",value:function(e,t){this.properties[e]=t}},{key:"validateFor",value:function(e){if(!this.properties)throw new Error("Key properties is required");switch(e){case d.TRACK:if(!this.event)throw new Error("Key event is required for track event");if(this.event in Object.values(y))switch(this.event){case y.CHECKOUT_STEP_VIEWED:case y.CHECKOUT_STEP_COMPLETED:case y.PAYMENT_INFO_ENTERED:this.checkForKey("checkout_id"),this.checkForKey("step");break;case y.PROMOTION_VIEWED:case y.PROMOTION_CLICKED:this.checkForKey("promotion_id");break;case y.ORDER_REFUNDED:this.checkForKey("order_id")}else this.properties.category||(this.properties.category=this.event);break;case d.PAGE:break;case d.SCREEN:if(!this.properties.name)throw new Error("Key 'name' is required in properties")}}},{key:"checkForKey",value:function(e){if(!this.properties[e])throw new Error("Key '"+e+"' is required in properties")}}]),e}(),O=function(){function e(){i(this,e),this.message=new P}return r(e,[{key:"setType",value:function(e){this.message.type=e}},{key:"setProperty",value:function(e){this.message.properties=e}},{key:"setUserProperty",value:function(e){this.message.user_properties=e}},{key:"setUserId",value:function(e){this.message.user_id=e}},{key:"setEventName",value:function(e){this.message.event=e}},{key:"updateTraits",value:function(e){this.message.context.traits=e}},{key:"getElementContent",value:function(){return this.message}}]),e}(),_=function(){function e(){i(this,e),this.rudderProperty=null,this.rudderUserProperty=null,this.event=null,this.userId=null,this.channel=null,this.type=null}return r(e,[{key:"setProperty",value:function(e){return this.rudderProperty=e,this}},{key:"setPropertyBuilder",value:function(e){return this.rudderProperty=e.build(),this}},{key:"setUserProperty",value:function(e){return this.rudderUserProperty=e,this}},{key:"setUserPropertyBuilder",value:function(e){return this.rudderUserProperty=e.build(),this}},{key:"setEvent",value:function(e){return this.event=e,this}},{key:"setUserId",value:function(e){return this.userId=e,this}},{key:"setChannel",value:function(e){return this.channel=e,this}},{key:"setType",value:function(e){return this.type=e,this}},{key:"build",value:function(){var e=new O;return e.setUserId(this.userId),e.setType(this.type),e.setEventName(this.event),e.setProperty(this.rudderProperty),e.setUserProperty(this.rudderUserProperty),e}}]),e}(),b=function(){function e(){i(this,e),this.address=null,this.age=null,this.birthday=null,this.company=null,this.createdat=null,this.description=null,this.email=null,this.firstname=null,this.gender=null,this.id=null,this.lastname=null,this.name=null,this.phone=null,this.title=null,this.username=null}return r(e,[{key:"setAddress",value:function(e){return this.address=e,this}},{key:"setAge",value:function(e){return this.age=e,this}},{key:"setBirthday",value:function(e){return this.birthday=e,this}},{key:"setCompany",value:function(e){return this.company=e,this}},{key:"setCreatedAt",value:function(e){return this.createdat=e,this}},{key:"setDescription",value:function(e){return this.description=e,this}},{key:"setEmail",value:function(e){return this.email=e,this}},{key:"setFirstname",value:function(e){return this.firstname=e,this}},{key:"setId",value:function(e){return this.id=e,this}},{key:"setLastname",value:function(e){return this.lastname=e,this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setPhone",value:function(e){return this.phone=e,this}},{key:"setTitle",value:function(e){return this.title=e,this}},{key:"setUsername",value:function(e){return this.username=e,this}}]),e}(),w="rl_user_id",T="rl_trait",D=function(){function e(){i(this,e),this.storage=window.localStorage}return r(e,[{key:"setItem",value:function(e,t){var i="";"string"==typeof t&&(i=t),"object"==s(t)&&(i=JSON.stringify(t)),this.storage.setItem(e,i)}},{key:"setUserId",value:function(e){"string"==typeof e&&this.storage.setItem(w,e)}},{key:"setUserTraits",value:function(e){"object"==s(e)&&this.storage.setItem(T,JSON.stringify(e))}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return JSON.parse(t)}},{key:"getUserId",value:function(){return this.storage.getItem(w)}},{key:"getUserTraits",value:function(){return JSON.parse(this.storage.getItem(T))}},{key:"removeItem",value:function(e){this.storage.removeItem(e)}},{key:"clear",value:function(){this.storage.removeItem(w),this.storage.removeItem(T)}}]),e}(),C=function e(){i(this,e),this.batch=null,this.write_key=null},R=new(function(){function e(){i(this,e),this.eventsBuffer=[],this.url=f,this.state="READY",setInterval(this.preaparePayloadAndFlush,p,this)}return r(e,[{key:"preaparePayloadAndFlush",value:function(e){if(0!=e.eventsBuffer.length&&"PROCESSING"!==e.state){var s,i,n=e.eventsBuffer.slice(0,30),r=new C;r.batch=n,r.write_key=e.write_key,r.sent_at=(s=(new Date).toISOString()).split("T")[0]+" "+s.split("T")[1].split("Z")[0].split(".")[0]+"+"+s.split("Z")[0].split(".")[1],(i=new t).open("POST",e.url,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){4===i.readyState&&200===i.status?e.eventsBuffer=e.eventsBuffer.slice(30):4===i.readyState&&i.status,e.state="READY"},i.send(JSON.stringify(r,h)),e.state="PROCESSING"}}},{key:"flush",value:function(e){this.eventsBuffer.push(e.getElementContent())}}]),e}()),S=function(){function e(){i(this,e),this.propertyMap={}}return r(e,[{key:"getPropertyMap",value:function(){return this.propertyMap}},{key:"getProperty",value:function(e){return this.propertyMap[e]}},{key:"setProperty",value:function(e,t){this.propertyMap[e]=t}},{key:"setPropertyMap",value:function(e){var t=this;this.propertyMap?Object.keys(e).forEach((function(s){t.propertyMap[s]=e[s]})):this.propertyMap=e}}]),e}(),U=function(e){function t(){return i(this,t),u(this,o(t).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),r(t,[{key:"event",value:function(){return y.PROMOTION_VIEWED}}]),t}(function(){function e(){i(this,e),this.promotion=null}return r(e,[{key:"setPromotion",value:function(e){return this.promotion=e,this}},{key:"build",value:function(){var e=new S;return e.setPropertyMap(this.promotion),e}}]),e}()),A=function(){function e(){i(this,e),this.promotion_id="",this.creative="",this.name="",this.position=0}return r(e,[{key:"setPromotionId",value:function(e){return this.promotion_id=e,this}},{key:"setCreative",value:function(e){return this.creative=e,this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setPosition",value:function(e){return this.position=e,this}}]),e}();function x(e){this.eventRepository||(this.eventRepository=R),this.eventRepository.flush(e)}var j=new(function(){function e(){i(this,e),this.ready=!1,this.writeKey="",this.eventsBuffer=[],this.clientIntegrations=[],this.configArray=[],this.clientIntegrationObjects=void 0,this.toBeProcessedArray=[],this.toBeProcessedByIntegrationArray=[],this.storage=new D,this.userId=null!=this.storage.getUserId()?this.storage.getUserId():l(),this.userTraits=null!=this.storage.getUserTraits()?this.storage.getUserTraits():{},this.storage.setUserId(this.userId),this.eventRepository=R}return r(e,[{key:"processResponse",value:function(e,t){(t=JSON.parse(t)).source.destinations.forEach((function(e,t){e.enabled&&e.config.useNativeSDK&&(this.clientIntegrations.push(e.destinationDefinition.name),this.configArray.push(e.config))}),this),this.init(this.clientIntegrations,this.configArray)}},{key:"init",value:function(e,t){var s=this;if(this.clientIntegrationObjects=[],e&&0!=e.length){e.forEach((function(e){var i=g[e];if("HS"===e){t[0].hubId;"6405167";var n=new i("6405167");n.init(),s.clientIntegrationObjects.push(n)}}));for(var i=function(e){s.toBeProcessedByIntegrationArray.forEach((function(t){var i,n=t[0];t.shift(),(i=s.clientIntegrationObjects[e])[n].apply(i,c(t))}))},n=0;n<this.clientIntegrationObjects.length;n++)i(n);this.toBeProcessedByIntegrationArray=[]}else this.toBeProcessedByIntegrationArray=[]}},{key:"page",value:function(e,t,i,n,r){"function"==typeof n&&(r=n,n=null),"function"==typeof i&&(r=i,n=i=null),"function"==typeof t&&(r=t,n=i=t=null),"object"===s(e)&&(n=t,i=e,t=e=null),"object"===s(t)&&(n=i,i=t,t=null),"string"==typeof e&&"string"!=typeof t&&(t=e,e=null),this.processPage(e,t,i,n,r)}},{key:"track",value:function(e,t,s,i){"function"==typeof s&&(i=s,s=null),"function"==typeof t&&(i=t,s=null,t=null),this.processTrack(e,t,s,i)}},{key:"identify",value:function(e,t,i,n){"function"==typeof i&&(n=i,i=null),"function"==typeof t&&(n=t,i=null,t=null),"object"==s(e)&&(i=t,t=e,e=this.userId),this.processIdentify(e,t,i,n)}},{key:"processPage",value:function(e,t,s,i,n){this.userId||(this.userId=l(),this.storage.setUserId(this.userId));var r=(new _).setType("page").build();t&&(r.message.name=t),e&&(s||(s={}),s.category=e),s&&(r.message.properties=s),r.message.context.traits=this.userTraits,r.message.anonymous_id=r.message.user_id=r.message.context.traits.anonymous_id=this.userId,this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(e){e.page(r)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push(["page",r]),x.call(this,r),n&&n()}},{key:"processTrack",value:function(e,t,s,i){this.userId||(this.userId=l(),this.storage.setUserId(this.userId));var n=(new _).setType("track").build();e&&n.setEventName(e),t&&n.setProperty(t),n.message.context.traits=this.userTraits,n.message.anonymous_id=n.message.user_id=n.message.context.traits.anonymous_id=this.userId,this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(e){e.track(n)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push(["track",n]),x.call(this,n),i&&i()}},{key:"processIdentify",value:function(e,t,s,i){this.userId=e,this.storage.setUserId(this.userId);var n=(new _).setType("identify").build();new b;t&&(this.userTraits=t,this.storage.setUserTraits(this.userTraits)),n.message.context.traits=this.userTraits,n.message.anonymous_id=n.message.user_id=n.message.context.traits.anonymous_id=this.userId,this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(e){e.identify(n)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push(["identify",n]),x.call(this,n),i&&i()}},{key:"identifyUser",value:function(e,t){this.userId=userId,this.storage.setUserId(this.userId),e&&e.message&&e.message.context&&e.message.context.traits&&(this.userTraits=traits,this.storage.setUserTraits(this.userTraits)),e.message.context.traits=this.userTraits,e.message.anonymous_id=e.message.user_id=e.message.context.traits.anonymous_id=this.userId,this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(t){t.identify(e)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push(["identify",e]),x.call(this,e),t&&t()}},{key:"trackPage",value:function(e,t){this.userId||(this.userId=l(),this.storage.setUserId(this.userId)),e.message.context.traits=this.userTraits,e.message.anonymous_id=e.message.user_id=e.message.context.traits.anonymous_id=this.userId,this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(t){t.page(e)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push(["page",e]),x.call(this,e),t&&t()}},{key:"trackEvent",value:function(e,t){this.userId||(this.userId=l(),this.storage.setUserId(this.userId)),e.message.context.traits=this.userTraits,e.message.anonymous_id=e.message.user_id=e.message.context.traits.anonymous_id=this.userId,this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(t){t.track(e)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push(["track",e]),x.call(this,e),t&&t()}},{key:"reset",value:function(){this.userId="",this.userTraits={},this.storage.clear()}},{key:"load",value:function(e){var s,i,n,r,o;this.writeKey=e,s=this,i="https://api.rudderlabs.com/source-config?write_key="+e,n=this.processResponse,o=n.bind(s),(r=new t).open("GET",i,!0),r.onload=function(){var e=r.status;200==e?o(200,r.responseText):o(e)},r.send()}}]),e}()),N=!!window.analytics&&window.analytics.push==Array.prototype.push,B=window.analytics?window.analytics[0]:[];if(B.length>0&&"load"==B[0]&&j[B[0]](B[1]),N){for(var M=1;M<window.analytics.length;M++)j.toBeProcessedArray.push(window.analytics[M]);for(var K=0;K<j.toBeProcessedArray.length;K++){var L=c(j.toBeProcessedArray[K]),V=L[0];L.shift(),j[V].apply(j,c(L))}j.toBeProcessedArray=[]}var W=j.identify.bind(j),F=j.page.bind(j),H=j.track.bind(j),q=j.trackEvent.bind(j),J=j.trackPage.bind(j),G=j.identifyUser.bind(j),Y=j.reset.bind(j),Z=j.load.bind(j);return e.ECommerceEvents=y,e.ECommercePromotion=A,e.PromotionViewedEvent=U,e.RudderElementBuilder=_,e.identify=W,e.identifyUser=G,e.load=Z,e.page=F,e.reset=Y,e.track=H,e.trackEvent=q,e.trackPage=J,e}({},XMLHttpRequestNode);
