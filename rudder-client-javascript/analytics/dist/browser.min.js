var analytics=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){return null==t?void 0:t}function h(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function l(e){e.message&&e.message;e instanceof Event&&e.target&&"script"==e.target.localName&&e.target.id}var d={TRACK:"track",PAGE:"page",IDENTIFY:"identify"},p={PRODUCTS_SEARCHED:"Products Searched",PRODUCT_LIST_VIEWED:"Product List Viewed",PRODUCT_LIST_FILTERED:"Product List Filtered",PROMOTION_VIEWED:"Promotion Viewed",PROMOTION_CLICKED:"Promotion Clicked",PRODUCT_CLICKED:"Product Clicked",PRODUCT_VIEWED:"Product Viewed",PRODUCT_ADDED:"Product Added",PRODUCT_REMOVED:"Product Removed",CART_VIEWED:"Cart Viewed",CHECKOUT_STARTED:"Checkout Started",CHECKOUT_STEP_VIEWED:"Checkout Step Viewed",CHECKOUT_STEP_COMPLETED:"Checkout Step Completed",PAYMENT_INFO_ENTERED:"Payment Info Entered",ORDER_UPDATED:"Order Updated",ORDER_COMPLETED:"Order Completed",ORDER_REFUNDED:"Order Refunded",ORDER_CANCELLED:"Order Cancelled",COUPON_ENTERED:"Coupon Entered",COUPON_APPLIED:"Coupon Applied",COUPON_DENIED:"Coupon Denied",COUPON_REMOVED:"Coupon Removed",PRODUCT_ADDED_TO_WISHLIST:"Product Added to Wishlist",PRODUCT_REMOVED_FROM_WISHLIST:"Product Removed from Wishlist",WISH_LIST_PRODUCT_ADDED_TO_CART:"Wishlist Product Added to Cart",PRODUCT_SHARED:"Product Shared",CART_SHARED:"Cart Shared",PRODUCT_REVIEWED:"Product Reviewed"},f="http://18.222.145.124:5000/dump",y=5e3;var v={HS:function(){function e(t){n(this,e),this.hubId=t,this.name="HS"}return r(e,[{key:"init",value:function(){!function(e,t){var n=document.createElement("script");n.src=t,n.type="text/javascript",n.id=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}("hubspot-integration","http://js.hs-scripts.com/"+this.hubId+".js")}},{key:"identify",value:function(e){var n=e.message.context.traits,i={};for(var r in n){if(Object.getOwnPropertyDescriptor(n,r)&&n[r])i[r]=n[r]}if(i.address){var s=i.address;for(var o in delete i.address,s)if(Object.getOwnPropertyDescriptor(s,o)&&s[o]){var a=o;i[a="street"==a?"address":a]=s[o]}}var u=e.message.context.user_properties;for(var c in u){if(Object.getOwnPropertyDescriptor(u,c)&&u[c])i[c]=u[c]}void 0!==("undefined"==typeof window?"undefined":t(window))&&(window._hsq=window._hsq||[]).push(["identify",i])}},{key:"track",value:function(e){var t=window._hsq=window._hsq||[],n={};n.id=e.message.event,e.message.properties&&e.message.properties.revenue&&(n.value=e.message.properties.revenue),t.push(["trackEvent",n])}},{key:"page",value:function(e){var t=window._hsq=window._hsq||[];e.message.properties&&e.message.properties.path&&t.push(["setPath",e.message.properties.path]),t.push(["trackPageView"])}},{key:"isLoaded",value:function(){return!(!window._hsq||window._hsq.push===Array.prototype.push)}}]),e}(),GA:function(){function e(t){n(this,e),this.trackingID=t,this.name="GA"}return r(e,[{key:"init",value:function(){!function(e,t,n,i,r,s,o){e.GoogleAnalyticsObject=r,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(s,o)}(window,document,"script",0,"ga"),ga("create",this.trackingID,"auto"),ga("send","pageview")}},{key:"identify",value:function(e){ga("set","userId",e.message.anonymous_id)}},{key:"track",value:function(e){var t=e.message.event,n=e.message.event,i=e.message.event,r="";e.message.properties&&(r=e.message.properties.value?e.message.properties.value:e.message.properties.revenue),ga("send","event",{hitType:"event",eventCategory:t,eventAction:n,eventLabel:i,eventValue:r})}},{key:"page",value:function(e){var t=e.properties&&e.properties.path?e.properties.path:void 0;t&&ga("set","page",t),ga("send","pageview")}},{key:"isLoaded",value:function(){return!!window.gaplugins}}]),e}(),HOTJAR:function(){function e(t){n(this,e),this.siteId=t,this.name="HOTJAR"}return r(e,[{key:"init",value:function(){var e,t,n,i;window.hotjarSiteId=this.siteId,e=window,t=document,e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:e.hotjarSiteId,hjsv:6},n=t.getElementsByTagName("head")[0],(i=t.createElement("script")).async=1,i.src="https://static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,n.appendChild(i)}},{key:"identify",value:function(e){}},{key:"track",value:function(e){}},{key:"page",value:function(e){}},{key:"isLoaded",value:function(){}}]),e}()},g=function e(){n(this,e),this.build="1.0.0",this.name="RudderLabs JavaScript SDK",this.namespace="com.rudderlabs.javascript",this.version="1.0.0"},m=function e(){n(this,e),this.name="RudderLabs JavaScript SDK",this.version="1.0.0"},E=function e(){n(this,e),this.name="",this.version=""},I=function e(){n(this,e),this.density=0,this.width=0,this.height=0},w=function e(){n(this,e),this.app=new g,this.traits=null,this.library=new m;var t=new E;t.version="";var i=new I;i.width=window.width,i.height=window.height,i.density=window.devicePixelRatio,this.userAgent=navigator.userAgent,this.locale=navigator.language||navigator.browserLanguage,this.ip="0.0.0.0",this.os=t,this.screen=i,this.device=null,this.network=null},k=function(){function e(){n(this,e),this.channel="web",this.context=new w,this.type=null,this.action=null,this.messageId=h().toString(),this.originalTimestamp=(new Date).toISOString(),this.anonymousId=h().toString(),this.userId=null,this.event=null,this.properties={},this.integrations={},this.integrations.All=!0}return r(e,[{key:"getProperty",value:function(e){return this.properties[e]}},{key:"addProperty",value:function(e,t){this.properties[e]=t}},{key:"validateFor",value:function(e){if(!this.properties)throw new Error("Key properties is required");switch(e){case d.TRACK:if(!this.event)throw new Error("Key event is required for track event");if(this.event in Object.values(p))switch(this.event){case p.CHECKOUT_STEP_VIEWED:case p.CHECKOUT_STEP_COMPLETED:case p.PAYMENT_INFO_ENTERED:this.checkForKey("checkout_id"),this.checkForKey("step");break;case p.PROMOTION_VIEWED:case p.PROMOTION_CLICKED:this.checkForKey("promotion_id");break;case p.ORDER_REFUNDED:this.checkForKey("order_id")}else this.properties.category||(this.properties.category=this.event);break;case d.PAGE:break;case d.SCREEN:if(!this.properties.name)throw new Error("Key 'name' is required in properties")}}},{key:"checkForKey",value:function(e){if(!this.properties[e])throw new Error("Key '"+e+"' is required in properties")}}]),e}(),P=function(){function e(){n(this,e),this.message=new k}return r(e,[{key:"setType",value:function(e){this.message.type=e}},{key:"setProperty",value:function(e){this.message.properties=e}},{key:"setUserProperty",value:function(e){this.message.user_properties=e}},{key:"setUserId",value:function(e){this.message.userId=e}},{key:"setEventName",value:function(e){this.message.event=e}},{key:"updateTraits",value:function(e){this.message.context.traits=e}},{key:"getElementContent",value:function(){return this.message}}]),e}(),O=function(){function e(){n(this,e),this.rudderProperty=null,this.rudderUserProperty=null,this.event=null,this.userId=null,this.channel=null,this.type=null}return r(e,[{key:"setProperty",value:function(e){return this.rudderProperty=e,this}},{key:"setPropertyBuilder",value:function(e){return this.rudderProperty=e.build(),this}},{key:"setUserProperty",value:function(e){return this.rudderUserProperty=e,this}},{key:"setUserPropertyBuilder",value:function(e){return this.rudderUserProperty=e.build(),this}},{key:"setEvent",value:function(e){return this.event=e,this}},{key:"setUserId",value:function(e){return this.userId=e,this}},{key:"setChannel",value:function(e){return this.channel=e,this}},{key:"setType",value:function(e){return this.type=e,this}},{key:"build",value:function(){var e=new P;return e.setUserId(this.userId),e.setType(this.type),e.setEventName(this.event),e.setProperty(this.rudderProperty),e.setUserProperty(this.rudderUserProperty),e}}]),e}(),T="rl_user_id",b="rl_trait",D=function(){function e(){n(this,e),this.storage=window.localStorage}return r(e,[{key:"setItem",value:function(e,n){var i="";"string"==typeof n&&(i=n),"object"==t(n)&&(i=JSON.stringify(n)),this.storage.setItem(e,i)}},{key:"setUserId",value:function(e){"string"==typeof e&&this.storage.setItem(T,e)}},{key:"setUserTraits",value:function(e){"object"==t(e)&&this.storage.setItem(b,JSON.stringify(e))}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return JSON.parse(t)}},{key:"getUserId",value:function(){return this.storage.getItem(T)}},{key:"getUserTraits",value:function(){return JSON.parse(this.storage.getItem(b))}},{key:"removeItem",value:function(e){this.storage.removeItem(e)}},{key:"clear",value:function(){this.storage.removeItem(T),this.storage.removeItem(b)}}]),e}(),_=function e(){n(this,e),this.batch=null,this.writeKey=null},R=new(function(){function e(){n(this,e),this.eventsBuffer=[],this.writeKey="",this.url=f,this.state="READY",this.batchSize=0,setInterval(this.preaparePayloadAndFlush,y,this)}return r(e,[{key:"preaparePayloadAndFlush",value:function(e){if(0!=e.eventsBuffer.length&&"PROCESSING"!==e.state){var t,n=e.eventsBuffer,i=new _;i.batch=n,i.writeKey=e.writeKey,i.sentAt=(new Date).toISOString(),i.batch.forEach((function(e){e.sentAt=i.sentAt})),e.batchSize=e.eventsBuffer.length,(t=new XMLHttpRequest).open("POST",e.url,!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Authorization","Basic "+btoa(i.writeKey+":")),t.onreadystatechange=function(){4===t.readyState&&200===t.status?e.eventsBuffer=e.eventsBuffer.slice(e.batchSize):4===t.readyState&&200!==t.status&&l(new Error("request failed with status: "+t.status+" for url: "+e.url)),e.state="READY"},t.send(JSON.stringify(i,c)),e.state="PROCESSING"}}},{key:"enqueue",value:function(e){this.eventsBuffer.push(e.getElementContent())}}]),e}()),S=function(){function e(){n(this,e),this.propertyMap={}}return r(e,[{key:"getPropertyMap",value:function(){return this.propertyMap}},{key:"getProperty",value:function(e){return this.propertyMap[e]}},{key:"setProperty",value:function(e,t){this.propertyMap[e]=t}},{key:"setPropertyMap",value:function(e){var t=this;this.propertyMap?Object.keys(e).forEach((function(n){t.propertyMap[n]=e[n]})):this.propertyMap=e}}]),e}(),C=function(e){function t(){return n(this,t),a(this,s(t).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,e),r(t,[{key:"event",value:function(){return p.PROMOTION_VIEWED}}]),t}(function(){function e(){n(this,e),this.promotion=null}return r(e,[{key:"setPromotion",value:function(e){return this.promotion=e,this}},{key:"build",value:function(){var e=new S;return e.setPropertyMap(this.promotion),e}}]),e}()),A=function(){function e(){n(this,e),this.promotion_id="",this.creative="",this.name="",this.position=0}return r(e,[{key:"setPromotionId",value:function(e){return this.promotion_id=e,this}},{key:"setCreative",value:function(e){return this.creative=e,this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setPosition",value:function(e){return this.position=e,this}}]),e}();function U(e){this.eventRepository||(this.eventRepository=R),this.eventRepository.enqueue(e)}var j=function(){function e(){n(this,e),this.ready=!1,this.eventsBuffer=[],this.clientIntegrations=[],this.configArray=[],this.clientIntegrationObjects=void 0,this.successfullyLoadedIntegration=[],this.failedToBeLoadedIntegration=[],this.toBeProcessedArray=[],this.toBeProcessedByIntegrationArray=[],this.storage=new D,this.userId=null!=this.storage.getUserId()?this.storage.getUserId():h(),this.userTraits=null!=this.storage.getUserTraits()?this.storage.getUserTraits():{},this.storage.setUserId(this.userId),this.eventRepository=R}return r(e,[{key:"processResponse",value:function(e,t){(t=JSON.parse(t)).source.destinations.forEach((function(e,t){e.enabled&&e.config.useNativeSDK&&(this.clientIntegrations.push(e.destinationDefinition.name),this.configArray.push(e.config))}),this),this.init(this.clientIntegrations,this.configArray)}},{key:"init",value:function(e,t){var n=this;this.clientIntegrationObjects=[],e&&0!=e.length?e.forEach((function(e){var i=v[e];if("HS"===e){var r=new i(t[0].hubId);r.init(),n.isInitialized(r).then(n.replayEvents)}if("GA"===e){var s=new i(t[0].trackingID);s.init(),n.isInitialized(s).then(n.replayEvents)}"HOTJAR"===e&&new i(t[0].siteID).init()})):this.toBeProcessedByIntegrationArray=[]}},{key:"replayEvents",value:function(e){e.successfullyLoadedIntegration.length+e.failedToBeLoadedIntegration.length==e.clientIntegrations.length&&(e.clientIntegrationObjects=e.successfullyLoadedIntegration,e.toBeProcessedByIntegrationArray.forEach((function(t){var n=t[0];t.shift();for(var i=t[0].message.integrations,r=0;r<e.clientIntegrationObjects.length;r++)if(i[e.clientIntegrationObjects[r].name]||null==i[e.clientIntegrationObjects[r].name]&&i.All)try{var s;(s=e.clientIntegrationObjects[r])[n].apply(s,u(t))}catch(e){l(e)}})),e.toBeProcessedByIntegrationArray=[])}},{key:"pause",value:function(e){return new Promise((function(t){setTimeout(t,e)}))}},{key:"isInitialized",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(i){return e.isLoaded()?(t.successfullyLoadedIntegration.push(e),i(t)):n>=1e4?(t.failedToBeLoadedIntegration.push(e),i(t)):void t.pause(1e3).then((function(){return t.isInitialized(e,n+1e3).then(i)}))}))}},{key:"page",value:function(e,n,i,r,s){"function"==typeof r&&(s=r,r=null),"function"==typeof i&&(s=i,r=i=null),"function"==typeof n&&(s=n,r=i=n=null),"object"===t(e)&&(r=n,i=e,n=e=null),"object"===t(n)&&(r=i,i=n,n=null),"string"==typeof e&&"string"!=typeof n&&(n=e,e=null),this.processPage(e,n,i,r,s)}},{key:"track",value:function(e,t,n,i){"function"==typeof n&&(i=n,n=null),"function"==typeof t&&(i=t,n=null,t=null),this.processTrack(e,t,n,i)}},{key:"identify",value:function(e,n,i,r){"function"==typeof i&&(r=i,i=null),"function"==typeof n&&(r=n,i=null,n=null),"object"==t(e)&&(i=n,n=e,e=this.userId),this.processIdentify(e,n,i,r)}},{key:"processPage",value:function(e,t,n,i,r){var s=(new O).setType("page").build();t&&(s.message.name=t),e&&(n||(n={}),n.category=e),n&&(s.message.properties=n),this.trackPage(s,i,r)}},{key:"processTrack",value:function(e,t,n,i){var r=(new O).setType("track").build();e&&r.setEventName(e),t?r.setProperty(t):r.setProperty({}),this.trackEvent(r,n,i)}},{key:"processIdentify",value:function(e,t,n,i){this.userId=e,this.storage.setUserId(this.userId);var r=(new O).setType("identify").build();t&&(this.userTraits=t,this.storage.setUserTraits(this.userTraits)),this.identifyUser(r,n,i)}},{key:"identifyUser",value:function(e,t,n){e.message.userId&&(this.userId=e.message.userId,this.storage.setUserId(this.userId)),e&&e.message&&e.message.context&&e.message.context.traits&&(this.userTraits=e.message.context.traits,this.storage.setUserTraits(this.userTraits)),this.processAndSendDataToDestinations("identify",e,t,n)}},{key:"trackPage",value:function(e,t,n){this.processAndSendDataToDestinations("page",e,t,n)}},{key:"trackEvent",value:function(e,t,n){this.processAndSendDataToDestinations("track",e,t,n)}},{key:"processAndSendDataToDestinations",value:function(e,t,n,i){try{this.userId||(this.userId=h(),this.storage.setUserId(this.userId)),t.message.context.traits=this.userTraits,t.message.anonymousId=t.message.userId=t.message.context.traits.anonymousId=this.userId,n&&this.processOptionsParam(t,n);var r=t.message.integrations;this.clientIntegrationObjects&&this.clientIntegrationObjects.forEach((function(n){(r[n.name]||null==r[n.name]&&r.All)&&n[e](t)})),this.clientIntegrationObjects||this.toBeProcessedByIntegrationArray.push([e,t]),U.call(this,t),i&&i()}catch(e){l(e)}}},{key:"processOptionsParam",value:function(e,t){var n=["integrations","anonymousId","originalTimestamp"];for(var i in t)if(n.includes(i))e.message[i]=t[i];else if("context"!==i)e.message.context[i]=t[i];else for(var r in t[i])e.message.context[r]=t[i][r]}},{key:"reset",value:function(){this.userId="",this.userTraits={},this.storage.clear()}},{key:"load",value:function(e,t){this.eventRepository.writeKey=e,t&&(this.eventRepository.url=t),function(e,t,n,i){var r,s=i.bind(e);(r=new XMLHttpRequest).open("GET",t,!0),r.setRequestHeader("Authorization","Basic "+btoa(n+":")),r.onload=function(){var e=r.status;200==e?s(200,r.responseText):(l(new Error("request failed with status: "+r.status+" for url: "+t)),s(e))},r.send()}(this,"https://api.rudderlabs.com/sourceConfig",e,this.processResponse)}}]),e}();window.addEventListener("error",(function(e){l(e)}),!0);var x=new j,N=!!window.analytics&&window.analytics.push==Array.prototype.push,B=window.analytics?window.analytics[0]:[];if(B.length>0&&"load"==B[0]){var L=B[0];B.shift(),x[L].apply(x,u(B))}if(N){for(var K=1;K<window.analytics.length;K++)x.toBeProcessedArray.push(window.analytics[K]);for(var M=0;M<x.toBeProcessedArray.length;M++){var q=u(x.toBeProcessedArray[M]),H=q[0];q.shift(),x[H].apply(x,u(q))}x.toBeProcessedArray=[]}var V=x.identify.bind(x),F=x.page.bind(x),W=x.track.bind(x),J=x.trackEvent.bind(x),z=x.trackPage.bind(x),G=x.identifyUser.bind(x),Y=x.reset.bind(x),X=x.load.bind(x);return e.ECommerceEvents=p,e.ECommercePromotion=A,e.PromotionViewedEvent=C,e.RudderElementBuilder=O,e.identify=V,e.identifyUser=G,e.load=X,e.page=F,e.reset=Y,e.track=W,e.trackEvent=J,e.trackPage=z,e}({});
